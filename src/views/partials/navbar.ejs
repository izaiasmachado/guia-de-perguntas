<nav
  class="navbar navbar-expand-md navbar-light"
  style="border-bottom: 1px solid #cccccc"
>
  <div class="container-fluid">
    <a
      href="/"
      class="full-logo-container logo-container collapse navbar-collapse"
    >
      <img src="/public/img/logo-full.svg" alt="Queue Underflow" />
    </a>

    <div class="logo-container d-block d-md-none">
      <img src="/public/img/logo.svg" alt="Queue Underflow" />
    </div>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <!-- Outros itens do menu podem ficar aqui -->
      </ul>
      <form class="d-flex" role="search" action="/" method="get">
        <input
          class="form-control me-2"
          type="search"
          name="search"
          placeholder="Pesquisa"
          aria-label="Pesquisa"
          value="<%= typeof search !== 'undefined' ? search : '' %>"
        />
        <button class="btn btn-outline-primary" type="submit">Buscar</button>
      </form>
    </div>

    <% if (typeof user !== 'undefined' && user !== null) { %>
    <div class="dropdown ms-2">
      <button
        class="btn btn-outline-secondary dropdown-toggle"
        type="button"
        id="inboxDropdown"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        Inbox ðŸ””
      </button>
      <ul
        class="dropdown-menu dropdown-menu-end"
        aria-labelledby="inboxDropdown"
      >
        <% if (typeof inboxMessages !== 'undefined' &&
        Array.isArray(inboxMessages) && inboxMessages.length > 0) { %> <%
        inboxMessages.forEach(function(message) { %>
        <li>
          <a
            class="dropdown-item text-truncate"
            href="/q/<%= message.answer.question.id %>"
            style="<%= message.isRead ? '' : 'font-weight: bold;' %>"
          >
            <div>
              <strong>Pergunta:</strong> <%= message.answer.question.title %>
            </div>
            <div><strong>Resposta:</strong> <%= message.answer.content %></div>
            <div>
              <small
                ><em
                  >Recebida em: <%= new Date(message.createdAt).toLocaleString()
                  %></em
                ></small
              >
            </div>
          </a>
        </li>
        <% }); %> <% } else { %>
        <li><a class="dropdown-item" href="#">No new messages</a></li>
        <% } %>
      </ul>
    </div>

    <div class="dropdown ms-2">
      <a
        class="d-flex align-items-center link-dark text-decoration-none dropdown-toggle"
        href="#"
        id="dropdownUser1"
        data-bs-toggle="dropdown"
        aria-expanded="false"
      >
        <strong>@<%= user.username %></strong>
      </a>

      <ul
        class="dropdown-menu dropdown-menu-end"
        aria-labelledby="dropdownUser1"
      >
        <li><a class="dropdown-item" href="/auth/logout">Sair</a></li>
      </ul>
    </div>
    <% } else { %>
    <a href="/auth/login" class="btn btn-primary ms-2">Entrar</a>
    <% } %>
  </div>
</nav>
